[tox]
envlist =
    py36-black
    py36-flake8
    py36-isort
    py36-mypy
    py36-tests
skipsdist = True

[testenv]
skip_install = True
setenv =
    PYTHONPATH = {toxinidir}
passenv = *

[testenv:py36-black]
commands =
    black --check --diff .
deps =
    black

[testenv:py36-flake8]
commands =
    flake8 pytest_mockservers tests
deps =
    flake8
    flake8-bugbear

[testenv:py36-isort]
commands =
    isort --check-only --diff --recursive .
deps =
    isort

[testenv:py36-mypy]
commands =
    mypy --ignore-missing-imports --follow-imports=silent pytest_mockservers tests
deps =
    mypy

[testenv:py36-tests]
commands =
    poetry install -v
    pytest -vv {posargs:tests/}
whitelist_externals =
    poetry
